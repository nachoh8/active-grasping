CMAKE_MINIMUM_REQUIRED(VERSION 3.10)

PROJECT (GraspModule)

FIND_PACKAGE(Simox REQUIRED)
MESSAGE (STATUS "** Simox version: ${Simox_VERSION}")
include_directories(${Simox_INCLUDE_DIRS})

find_package(Eigen3 REQUIRED)
include_directories(${EIGEN3_INCLUDE_DIR})

add_library(Grasp "")

target_sources(Grasp
  PRIVATE
    include/grasp/GraspResult.hpp
    include/grasp/GraspExecutor.hpp
    include/grasp/TestGramacyExecutor.hpp
    include/grasp/GraspPlanner.hpp
    src/TestGramacyExecutor.cpp
    src/GraspPlanner.cpp
    )


target_include_directories(Grasp
  PUBLIC
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
    $<INSTALL_INTERFACE:include>)

set(CMAKE_C_COMPILER "gcc-8")
set(CMAKE_CXX_COMPILER "g++-8")
set(CMAKE_CXX_STANDARD_DEFAULT)
add_definitions(-std=c++2a)
add_definitions(-fPIC)

#target_compile_features(Grasp PUBLIC cxx_std_17)
set_target_properties(Grasp PROPERTIES PUBLIC_HEADER include/grasp/Grasp.hpp)

# TARGET_LINK_LIBRARIES(Grasp PRIVATE bayesopt nlopt)
# TARGET_LINK_LIBRARIES(Grasp PUBLIC Simox Eigen3::Eigen)
MESSAGE (STATUS "** Simox: ${Simox_LIBRARIES}")
target_link_libraries (Grasp ${Simox_LIBRARIES})

add_library(${PROJECT_NAMESPACE}::Grasp ALIAS Grasp)

set(LIB_DIR "${CMAKE_CURRENT_SOURCE_DIR}/lib")

install(TARGETS Grasp
    EXPORT ${PROJECT_NAME}Targets
    LIBRARY DESTINATION ${LIB_DIR}
    ARCHIVE DESTINATION ${LIB_DIR}
    PUBLIC_HEADER DESTINATION ${LIB_DIR})
